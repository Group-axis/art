webpackJsonp([19],{900:function(e,t,n){var i=n(878),o=n(1129),a=n(899),r=n(1128);t.DataTable=i.DataTable,t.DataEvent=i.DataEvent,t.PageEvent=i.PageEvent,t.SortEvent=i.SortEvent,t.DefaultSorter=o.DefaultSorter,t.Paginator=a.Paginator,t.BootstrapPaginator=r.BootstrapPaginator,t.DataTableDirectives=[i.DataTable,o.DefaultSorter,a.Paginator,r.BootstrapPaginator]},1128:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(1),r=n(878),s=n(899),c=n(528),l=function(){function BootstrapPaginator(){this.rowsOnPageSet=[],this.minRowsOnPage=0}return BootstrapPaginator.prototype.ngOnChanges=function(e){e.rowsOnPageSet&&(this.minRowsOnPage=c.min(this.rowsOnPageSet))},i([a.Input("rowsOnPageSet"),o("design:type",Object)],BootstrapPaginator.prototype,"rowsOnPageSet",void 0),i([a.Input("mfTable"),o("design:type",r.DataTable)],BootstrapPaginator.prototype,"mfTable",void 0),BootstrapPaginator=i([a.Component({selector:"mfBootstrapPaginator",template:'\n    <mfPaginator #p [mfTable]="mfTable">\n        <nav class="pagination" *ngIf="p.dataLength > p.rowsOnPage">\n            <li [class.disabled]="p.activePage <= 1" (click)="p.setPage(1)">\n                <a style="cursor: pointer">&laquo;</a>\n            </li>\n            <li *ngIf="p.activePage > 4 && p.activePage + 1 > p.lastPage" (click)="p.setPage(p.activePage - 4)">\n                <a style="cursor: pointer">{{p.activePage-4}}</a>\n            </li>\n            <li *ngIf="p.activePage > 3 && p.activePage + 2 > p.lastPage" (click)="p.setPage(p.activePage - 3)">\n                <a style="cursor: pointer">{{p.activePage-3}}</a>\n            </li>\n            <li *ngIf="p.activePage > 2" (click)="p.setPage(p.activePage - 2)">\n                <a style="cursor: pointer">{{p.activePage-2}}</a>\n            </li>\n            <li *ngIf="p.activePage > 1" (click)="p.setPage(p.activePage - 1)">\n                <a style="cursor: pointer">{{p.activePage-1}}</a>\n            </li>\n            <li class="active">\n                <a style="cursor: pointer">{{p.activePage}}</a>\n            </li>\n            <li *ngIf="p.activePage + 1 <= p.lastPage" (click)="p.setPage(p.activePage + 1)">\n                <a style="cursor: pointer">{{p.activePage+1}}</a>\n            </li>\n            <li *ngIf="p.activePage + 2 <= p.lastPage" (click)="p.setPage(p.activePage + 2)">\n                <a style="cursor: pointer">{{p.activePage+2}}</a>\n            </li>\n            <li *ngIf="p.activePage + 3 <= p.lastPage && p.activePage < 3" (click)="p.setPage(p.activePage + 3)">\n                <a style="cursor: pointer">{{p.activePage+3}}</a>\n            </li>\n            <li *ngIf="p.activePage + 4 <= p.lastPage && p.activePage < 2" (click)="p.setPage(p.activePage + 4)">\n                <a style="cursor: pointer">{{p.activePage+4}}</a>\n            </li>\n            <li [class.disabled]="p.activePage >= p.lastPage" (click)="p.setPage(p.lastPage)">\n                <a style="cursor: pointer">&raquo;</a>\n            </li>\n        </nav>\n        <nav class="pagination pull-right" *ngIf="p.dataLength > minRowsOnPage">\n            <li *ngFor="let rows of rowsOnPageSet" [class.active]="p.rowsOnPage===rows" (click)="p.setRowsOnPage(rows)">\n                <a style="cursor: pointer">{{rows}}</a>\n            </li>\n        </nav>\n    </mfPaginator>\n    ',directives:[s.Paginator]}),o("design:paramtypes",[])],BootstrapPaginator)}();t.BootstrapPaginator=l},878:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(1),r=n(528),s=function(){function DataTable(){this.inputData=[],this.sortBy="",this.sortOrder="asc",this.rowsOnPage=1e3,this.activePage=1,this.mustRecalculateData=!1,this.onDataChange=new a.EventEmitter,this.onSortChange=new a.EventEmitter,this.onPageChange=new a.EventEmitter}return DataTable.prototype.getSort=function(){return{sortBy:this.sortBy,sortOrder:this.sortOrder}},DataTable.prototype.setSort=function(e,t){this.sortBy===e&&this.sortOrder===t||(this.sortBy=e,this.sortOrder=t,this.mustRecalculateData=!0,this.onSortChange.emit({sortBy:e,sortOrder:t}))},DataTable.prototype.getPage=function(){return{activePage:this.activePage,rowsOnPage:this.rowsOnPage,dataLength:this.inputData.length}},DataTable.prototype.setPage=function(e,t){this.rowsOnPage===t&&this.activePage===e||(this.activePage=this.activePage!==e?e:this.calculateNewActivePage(this.rowsOnPage,t),this.rowsOnPage=t,this.mustRecalculateData=!0,this.onPageChange.emit({activePage:this.activePage,rowsOnPage:this.rowsOnPage,dataLength:this.inputData.length}))},DataTable.prototype.calculateNewActivePage=function(e,t){var n=(this.activePage-1)*e+1,i=Math.ceil(n/t);return i},DataTable.prototype.ngOnChanges=function(e){e.inputData&&(this.inputData=this.inputData||[],this.onPageChange.emit({activePage:this.activePage,rowsOnPage:this.rowsOnPage,dataLength:this.inputData.length}),this.mustRecalculateData=!0)},DataTable.prototype.ngDoCheck=function(){this.mustRecalculateData&&(this.fillData(),this.mustRecalculateData=!1)},DataTable.prototype.fillData=function(){this.activePage=this.activePage,this.rowsOnPage=this.rowsOnPage;var e=(this.activePage-1)*this.rowsOnPage,t=this.inputData;t=r.orderBy(t,[this.sortBy],[this.sortOrder]),t=r.slice(t,e,e+this.rowsOnPage),this.data=t},i([a.Input("mfData"),o("design:type",Array)],DataTable.prototype,"inputData",void 0),i([a.Input("mfRowsOnPage"),o("design:type",Object)],DataTable.prototype,"rowsOnPage",void 0),i([a.Input("mfActivePage"),o("design:type",Object)],DataTable.prototype,"activePage",void 0),DataTable=i([a.Directive({selector:"table[mfData]",exportAs:"mfDataTable"}),o("design:paramtypes",[])],DataTable)}();t.DataTable=s},1129:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(1),r=n(878),s=function(){function DefaultSorter(e){var t=this;this.mfTable=e,this.isSortedByMeAsc=!1,this.isSortedByMeDesc=!1,e.onSortChange.subscribe(function(e){t.isSortedByMeAsc=e.sortBy===t.sortBy&&"asc"===e.sortOrder,t.isSortedByMeDesc=e.sortBy===t.sortBy&&"desc"===e.sortOrder})}return DefaultSorter.prototype.sort=function(){this.isSortedByMeAsc?this.mfTable.setSort(this.sortBy,"desc"):this.mfTable.setSort(this.sortBy,"asc")},i([a.Input("by"),o("design:type",String)],DefaultSorter.prototype,"sortBy",void 0),DefaultSorter=i([a.Component({selector:"mfDefaultSorter",template:'\n        <a style="cursor: pointer" (click)="sort()" class="text-nowrap">\n            <ng-content></ng-content>\n            <span *ngIf="isSortedByMeAsc" class="glyphicon glyphicon-triangle-top" aria-hidden="true"></span>\n            <span *ngIf="isSortedByMeDesc" class="glyphicon glyphicon-triangle-bottom" aria-hidden="true"></span>\n        </a>'}),o("design:paramtypes",[r.DataTable])],DefaultSorter)}();t.DefaultSorter=s},899:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},r=n(1),s=n(878),c=function(){function Paginator(e){var t=this;this.injectMfTable=e,this.dataLength=0,this.onPageChangeSubscriber=function(e){t.activePage=e.activePage,t.rowsOnPage=e.rowsOnPage,t.dataLength=e.dataLength,t.lastPage=Math.ceil(t.dataLength/t.rowsOnPage)}}return Paginator.prototype.ngOnChanges=function(e){this.mfTable=this.inputMfTable||this.injectMfTable,this.onPageChangeSubscriber(this.mfTable.getPage()),this.mfTable.onPageChange.subscribe(this.onPageChangeSubscriber)},Paginator.prototype.setPage=function(e){this.mfTable.setPage(e,this.rowsOnPage)},Paginator.prototype.setRowsOnPage=function(e){this.mfTable.setPage(this.activePage,e)},i([r.Input("mfTable"),o("design:type",s.DataTable)],Paginator.prototype,"inputMfTable",void 0),Paginator=i([r.Component({selector:"mfPaginator",template:"<ng-content></ng-content>"}),a(0,r.Optional()),o("design:paramtypes",[s.DataTable])],Paginator)}();t.Paginator=c},1224:function(e,t,n){"use strict";var i=n(1),o=n(900),a=n(880),r=n(926),s=n(531),c=n(530),l=n(1166),p=n(58),d=n(38),u=n(1148),g=n(258),m=n(887),h=function(){function AMHAssignmentList(e,t,n,i){this.amhAssignmentService=t,this.auth=n,this.logger=i,this.data=[],this.original=[],this.menuConfig=[new s.MenuConfig("fa fa-home","/home","Home"),new s.MenuConfig("fa fa-sitemap","/amh-routing","AMH Routing"),new s.MenuConfig("fa fa-cloud-download","","Routing Overview")],this.selectionTables=[new r.Option(a.AssignType.BK_CHANNEL,"BK_CH","Backend Channel"),new r.Option(a.AssignType.DTN_COPY,"DTN_CPY","Distribution Copy"),new r.Option(a.AssignType.FEED_DTN_COPY,"FEED_DTN_CPY","Feedback Distribution Copy")],this.defaultOption=this.selectedAssignmentType(+e.params.st),this.loadAssignments(this.defaultOption)}return AMHAssignmentList.prototype.selectedAssignmentType=function(e){var t=this.selectionTables.find(function(t){return t.id===e});return t?t:this.selectionTables[0]},AMHAssignmentList.prototype.ngOnInit=function(){},AMHAssignmentList.prototype.loadAssignments=function(e){var t=this;e||(e=this.selectionTables[0]),this.original=[],this.amhAssignmentService.findAssignments(e.id).subscribe(function(n){var i=u.AMHAssignmentService.getFromSource(n);i.map(function(n){t.original=t.original.concat(t.fromJsonToAssignList(e.id,n))}),t.logger.debug("final size "+t.original.length),t.data=t.original},function(e){return t.logger.error("Can't get assignments. Error code: %s, URL: %s ",e.status,e.url)})},AMHAssignmentList.prototype.fromJsonToAssignList=function(e,t){var n=this,i=[];switch(e){case a.AssignType.BK_CHANNEL:t.rules.length>0?(t.rules.map(function(e){i.push(new a.AssignmentList(t.active,t.code,t.backendPrimaryKey.code,t.backendPrimaryKey.direction,"",t.sequence,e.code,e.expression,e.sequence,t.environment,t.version))}),i=i.sort(function(e,t){return 100*e.backSequence+e.ruleSequence-(100*t.backSequence+t.ruleSequence)})):i.push(new a.AssignmentList(t.active,t.code,t.backendPrimaryKey.code,t.backendPrimaryKey.direction,"",t.sequence,"","",void 0,t.environment,t.version));break;case a.AssignType.DTN_COPY:case a.AssignType.FEED_DTN_COPY:var o=t.rules.length<=t.backends.length,r=this.getList(o,t,["code","sequence"]),s=this.getList(!o,t,["code","sequence"]);r.map(function(e){var r=n.getBackendInfo(o?[e]:s.splice(0,1)),c=n.getRuleInfo(o?s.splice(0,1):[e]);i.push(new a.AssignmentList(t.active,t.code,r.code,r.direction,"",t.sequence,c.code,c.expression,c.sequence,t.environment,t.version))})}return i},AMHAssignmentList.prototype.getList=function(e,t,n){var i=e?t.backends:t.rules,o=e?n[0]:n[1];return this.sort(i,o)},AMHAssignmentList.prototype.sort=function(e,t){return e.sort(function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0})},AMHAssignmentList.prototype.getBackendInfo=function(e){return 0==e.length?{code:"",direction:""}:{code:e[0].code,direction:e[0].direction}},AMHAssignmentList.prototype.getRuleInfo=function(e){return 0==e.length?{code:"",expression:"",sequence:void 0}:{code:e[0].code,expression:e[0].expression,sequence:e[0].sequence}},AMHAssignmentList.prototype.updateSelectionTable=function(e){this.defaultOption=e,this.loadAssignments(this.defaultOption),this.filterValue.nativeElement.value="";var t=this.table.getPage();this.table.setPage(1,t.rowsOnPage)},AMHAssignmentList.prototype.updateData=function(e){this.data=this.changeFilter(this.original,{filtering:{filterString:e,columnName:"ruleExpressions"}})},AMHAssignmentList.prototype.changeFilter=function(e,t){if(!t.filtering)return e;var n=t.filtering.filterString.toUpperCase(),i=e.filter(function(e){return e[t.filtering.columnName].toUpperCase().match(n)}),o=e.filter(function(e){return e.code.toUpperCase().match(n)}),a=e.filter(function(e){return e.backCode.toUpperCase().match(n)}),r=e.filter(function(e){return e.ruleCode.toUpperCase().match(n)}),s=i.concat(o).concat(a).concat(r),c=[];return s.forEach(function(e){var t=c.find(function(t,n,i){return e.code==t.code&&e.backCode==t.backCode&&e.ruleCode==t.ruleCode});t||c.push(e)}),c},AMHAssignmentList.prototype.actionExportCSVFile=function(){var e=this;0!=this.data.length&&(this.alertOpen(),this.amhAssignmentService.exportOverview(this.defaultOption.id,this.auth.getUser()).subscribe(function(t){e.amhAssignmentService.downloadFile("/amhrouting/csv/export/assignments/"+t.fileName,t.fileName)},function(t){e.logger.error("[EXPORT_CSV] Can't be done. Error code: %s, URL: %s ",t.status,t.url),e.alert.message=" An error has occurred while downloading the asynchronous execution result",e.closeAlert()},function(){e.alert.message="Download Done.",e.closeAlert()}))},AMHAssignmentList.prototype.closeAlert=function(){var e=this;setTimeout(function(){return e.alert.cancel()},1e3)},AMHAssignmentList.prototype.alertOpen=function(){this.alert.alertFooter=!1,this.alert.cancelButton=!1,this.alert.okButton=!1,this.alert.alertHeader=!0,this.alert.alertTitle="Download in progress ",this.alert.message="This alert will be close when the download finish.",this.alert.cancelButtonText="Ok",this.alert.open()},AMHAssignmentList.prototype.alertResponse=function(e){switch(e){case 0:break;case 1:break;case 100:break;case 101:}},__decorate([i.ViewChild("filterText"),__metadata("design:type",Object)],AMHAssignmentList.prototype,"filterValue",void 0),__decorate([i.ViewChild(o.DataTable),__metadata("design:type",Object)],AMHAssignmentList.prototype,"table",void 0),__decorate([i.ViewChild(m.Alert),__metadata("design:type",Object)],AMHAssignmentList.prototype,"alert",void 0),AMHAssignmentList=__decorate([i.Component({selector:"amh-assignment-list",providers:[u.AMHAssignmentService,d.Auth],styles:["\n    h1 {\n      font-family: Arial, Helvetica, sans-serif\n    }\n  "],template:n(1261),directives:[o.DataTableDirectives,c.HeaderSecondary,l.AMHSelectionTableComponent,m.Alert,g.Permissions,g.NotPermissions]}),__metadata("design:paramtypes",[p.RouteParams,u.AMHAssignmentService,d.Auth,d.Logger])],AMHAssignmentList)}();t.AMHAssignmentList=h},1261:function(e,t){e.exports='<!--main content start-->\r\n<section id="main-content">\r\n    <section class="wrapper">\r\n        <menu-header [header-menu]="menuConfig"></menu-header>\r\n        <div class="row">\r\n            <!--<div class="col-sm-1 col-md-1 col-lg-1"></div>-->\r\n            <div class="col-sm-12 col-md-12 col-lg-12">\r\n                <div class="panel panel-default">\r\n                    <div class="panel-heading" >\r\n                    <div class="row col-sm-12 col-md-12 col-lg-12">\r\n                        <amh-selection-table style="padding:0px;" class="col-sm-4 col-md-4 col-lg-4" [default-option]="defaultOption" [options]="selectionTables" (tableSelected)="updateSelectionTable($event)">\r\n                        </amh-selection-table>\r\n                        <div class="col-sm-8 col-md-8 col-lg-8">&nbsp;</div>\r\n                    </div>\r\n                    </div>\r\n                </div>\r\n                <!--  section end -->\r\n            </div>\r\n            <!--<div class="col-sm-1 col-md-1 col-lg-1"></div>-->\r\n        </div>\r\n        <div class="row">\r\n            <!--<div class="col-sm-1 col-md-1 col-lg-1"></div>-->\r\n            <div class="col-sm-12 col-md-12 col-lg-12">\r\n                <div class="panel panel-default">\r\n                    <div class="panel-heading" style="color:#688a7e;">\r\n                        <label class="panel-title">AMH Routing Table </label>\r\n                        \r\n                        <i [routerLink]=" [\'AMHSimulation\', { \'st\': defaultOption.id }, \'AMHSimulatorComponent\'] " class="fa fa-play-circle-o pull-right margin-right image-pointer" aria-hidden="true" style="font-size:2em;margin-top: 7px;"></i>\r\n                        <!--<a target="_blank" href="/assets/pdf/routing.pdf">-->\r\n                            <!--<i class="fa fa-file-pdf-o pull-right margin-right image-pointer" aria-hidden="true" style="font-size:2em;margin-top: 7px;"></i>-->\r\n                        <!--</a>-->\r\n                        <!--<a target="_blank" href="#">-->\r\n                            <!---->\r\n                            <i class="fa fa-file-excel-o pull-right image-pointer" (click)="actionExportCSVFile()" style="font-size:2em;margin-top: 7px;"></i>\r\n                            <!--</a>-->\r\n                        <!--<span class="menu-arrow" [ngClass]="{\'arrow_carrot-down\': descriptionGroup?.isOpen, \'arrow_carrot-right\': !descriptionGroup?.isOpen}"></span>-->\r\n                        <i class="fa fa-search pull-right" aria-hidden="true" style="font-size:1.5em; margin:12px 45px 0px 0px;"></i>\r\n                        <input  class="pull-right" #filterText (keyup)="updateData(filterText.value)" style="margin-right:10px; height:2.3em; margin-top: 5px;"/>\r\n                        \r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <table style="table-layout:fixed; word-wrap: break-word;" class="table table-striped table-bordered table-hover table-condensed table-responsive color-black" [mfData]="data" #mf="mfDataTable" [mfRowsOnPage]="10">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th style="width: 5%">\r\n                                        <mfDefaultSorter by="active">Active</mfDefaultSorter>\r\n                                    </th>\r\n                                    <th style="width: 7%">\r\n                                        <mfDefaultSorter by="backSequence">Assign Seq</mfDefaultSorter>\r\n                                    </th>\r\n                                    <th style="width: 10%">\r\n                                        <mfDefaultSorter by="code">Assign Code</mfDefaultSorter>\r\n                                    </th>\r\n                                    <th style="width: 10; border-right: 3px solid #dddddd;">\r\n                                        <mfDefaultSorter by="backCode">Backend Code</mfDefaultSorter>\r\n                                    </th>\r\n                                    <th style="width: 5%">\r\n                                        <mfDefaultSorter by="ruleSequence">Rule Seq</mfDefaultSorter>\r\n                                    </th>\r\n                                    <th style="width: 10%">\r\n                                        <mfDefaultSorter by="ruleCode">Rule Code</mfDefaultSorter>\r\n                                    </th>\r\n                                    <th style="width: 53%">\r\n                                        <mfDefaultSorter by="ruleExpressions">Rule Expressions</mfDefaultSorter>\r\n                                    </th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr *ngFor="let item of mf.data">\r\n                                    <td>\r\n                                        <span *ngIf="item.active"  class="badge bg-primary">\r\n                                            <i class="fa fa-check" aria-hidden="true"></i>\r\n                                        </span>\r\n                                        <!--class="badge bg-danger" -->\r\n                                        <span *ngIf="!item.active" >\r\n                                            <!--<i class="fa fa-times" aria-hidden="true"></i>-->\r\n                                            &nbsp;\r\n                                        </span>\r\n                                     </td>\r\n                                    <td>{{item.backSequence}}</td>\r\n                                    <td *gpIf="[\'amh.modify.assignment\']" class="image-pointer" [routerLink]=" [\'AMHAssignmentEdit\', { \'code\': item.code, \'st\': defaultOption.id,\'return_to\':\'AMHAssignmentList\'}, \'AMHAssignmentComponent\'] ">{{item.code | uppercase }}</td>\r\n                                    <td *gpNotIf="[\'amh.modify.assignment\']"> {{item.code | uppercase }}</td>\r\n                                    <td style="border-right: 3px solid #dddddd;">{{item.backCode | uppercase }}</td>\r\n                                    <td>{{item.ruleSequence}} </td>\r\n                                    <td *gpIf="[\'amh.modify.rule\']" class="image-pointer" [routerLink]=" [\'AMHRuleEdit\', { \'code\': item.ruleCode, \'return_to\':\'AMHAssignmentList\', \'params\':\'code=\'+item.code+\'&st=\'+defaultOption.id}, \'AMHRuleComponent\'] ">{{item.ruleCode | uppercase }}</td>\r\n                                    <td *gpNotIf="[\'amh.modify.assignment\']"> {{item.ruleCode | uppercase }}</td>\r\n                                    <td>{{item.ruleExpressions }}</td>\r\n                                </tr>\r\n                            </tbody>\r\n                            <tfoot>\r\n                                <tr>\r\n                                    <td colspan="7">\r\n                                        <mfBootstrapPaginator [rowsOnPageSet]="[10,25, 50, 100]"></mfBootstrapPaginator>\r\n                                    </td>\r\n                                </tr>\r\n                            </tfoot>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!--  section end -->\r\n            <!--<div class="col-sm-1 col-md-1 col-lg-1"></div>-->\r\n        </div>\r\n        <!--/.row-->\r\n    </section>\r\n</section>\r\n<alert (alertOutput)="alertResponse($event)"></alert>\r\n<!--main content end-->\r\n       <footer class="footer dark-bg">\r\n           <div class="row">\r\n               <div class="col-sm-12 col-md-12 col-lg-12">\r\n                <div class="top-nav notification-row pull-right" >\r\n                </div>\r\n               </div>\r\n           </div>\r\n       </footer>'},1140:function(e,t,n){"use strict";function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}__export(n(1224))},1165:function(e,t,n){"use strict";var i=n(30),o=n(926),a=n(38),r=function(){function AMHSelectionTableComponent(e){this.logger=e,this.tableSelected=new i.EventEmitter}return AMHSelectionTableComponent.prototype.ngOnInit=function(){this.logger.log("hello `AMH selection table` component")},AMHSelectionTableComponent.prototype.selectOption=function(e){this.logger.log("option selected "+this.options[e].description),this.tableSelected.emit(this.options[e])},__decorate([i.Input("default-option"),__metadata("design:type",o.Option)],AMHSelectionTableComponent.prototype,"optionSelected",void 0),__decorate([i.Input(),__metadata("design:type",Array)],AMHSelectionTableComponent.prototype,"options",void 0),__decorate([i.Input(),__metadata("design:type",String)],AMHSelectionTableComponent.prototype,"label",void 0),__decorate([i.Output(),__metadata("design:type",i.EventEmitter)],AMHSelectionTableComponent.prototype,"tableSelected",void 0),AMHSelectionTableComponent=__decorate([i.Component({selector:"amh-selection-table",template:n(1177)}),__metadata("design:paramtypes",[a.Logger])],AMHSelectionTableComponent)}();t.AMHSelectionTableComponent=r},1177:function(e,t){e.exports='<!--main content start-->\r\n\r\n<div class="row col-lg-12 col-sm-12 col-md-12" style="margin : 0px; padding:0px;">\r\n    <div class=\'form-group form-group-sm\' style="margin:0px;">\r\n        <!--<label class="col-lg-3 col-sm-3 text-center control-label">{{label}}</label>-->\r\n        <select style="width: 100%;" class=\'combo-select col-lg-12 col-sm-12 col-md-12\' [(ngModel)]="optionSelected" (change)="selectOption($event.target.selectedIndex)">\r\n            <option *ngFor="let option of options" [ngValue]="option">{{option.description}}</option>\r\n        </select>\r\n    </div>\r\n</div>'},1166:function(e,t,n){"use strict";function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}__export(n(1165))},1148:function(e,t,n){"use strict";var i=n(257),o=n(30),a=n(14),r=n(880),s=n(38),c=function(){function AMHAssignmentService(e,t,n,i,o){this.http=e,this.config=t,this.store=n,this.fileDownloader=i,this.logger=o,this.environment="UNKNOWN",this.version="DEFAULT",this.persistence=sessionStorage}return AMHAssignmentService.prototype.getAssignmentPath=function(e){switch(e){case r.AssignType.BK_CHANNEL:return"assignments";case r.AssignType.DTN_COPY:return"distributionCopies";case r.AssignType.FEED_DTN_COPY:return"feedbackDtnCopies";default:return"assignments"}},AMHAssignmentService.prototype.findAssignmentByCode=function(e,t){return this.http.get(this.config.get("esBackUrl")+"/amhrouting/"+this.getAssignmentPath(e)+"/"+t).map(function(e){return e.json()}).map(function(e){return e.found?e._source:e})},AMHAssignmentService.prototype.findAssignments=function(e){return this.http.post(this.config.get("esBackUrl")+"/amhrouting/"+this.getAssignmentPath(e)+"/_search?size=1000",'{"sort": [{"sequence": {"order": "asc"}}]}').map(function(e){return e.json()})},AMHAssignmentService.prototype.findRuleByCode=function(e){var t=this;this.logger.log(">> looking for "+e);new r.AMHRule("","");return this.findRules().flatMap(function(n){var i=AMHAssignmentService.getFromSource(n).find(function(t){return t.code.toLowerCase()==(e?e.toLocaleLowerCase():"")});return t.logger.log(">> elastic return  "+i),i?a.Observable.create(function(e){return e.next(i),e.complete(),function(){return t.logger.log("disposed found")}}):a.Observable.create(function(e){return e.next(new r.AMHRule("","")),t.logger.log("returning to observer code=empty"),e.complete(),function(){return t.logger.log("disposed not found")}})})},AMHAssignmentService.prototype.findRules=function(){return this.http.get(this.config.get("esBackUrl")+"/amhrouting/rules/_search?size=100").map(function(e){return e.json()})},AMHAssignmentService.prototype.findBackends=function(){return this.logger.log("findBackends url = "+this.config.get("esBackUrl")),this.http.get(this.config.get("esBackUrl")+"/amhrouting/backends/_search?size=100").map(function(e){return e.json()})},AMHAssignmentService.prototype.findAssignmentsBySequence=function(e,t){var n=this;return this.findAssignments(e).flatMap(function(e){var i=AMHAssignmentService.getFromSource(e),o=[],r=i.find(function(e){return e.sequence==t});return r&&o.push(r),n.logger.log("assignmentBySequence "+o),a.Observable.from(o)})},AMHAssignmentService.prototype.findAssignmentsByCode=function(e,t){var n=this;return this.findAssignments(e).flatMap(function(e){var i=AMHAssignmentService.getFromSource(e),o=[],r=i.find(function(e){return e.code==t});return r&&o.push(r),n.logger.log("assignmentByCode "+o),a.Observable.from(o)})},AMHAssignmentService.prototype.findAssignmentsByBackendPK=function(e,t){var n=this;return this.findAssignments(e).flatMap(function(e){for(var i=AMHAssignmentService.getFromSource(e),o=[],r=0;r<i.length;r++){var s=i[r];if(s.backendPrimaryKey.code===t.code&&s.backendPrimaryKey.direction===t.direction){o.push(s);break}}return n.logger.log("[flatMap] returning "+o),a.Observable.from(o)})},AMHAssignmentService.prototype.replacerFor=function(e){var t=function(t,n){return e.forEach(function(e){n&&n[e]&&n[e]instanceof Array&&(n[e]=n[e][0])}),n};return t},AMHAssignmentService.prototype.saveAssignment=function(e,t,n){var o=this,a=new i.Headers({"Content-Type":"application/json",userId:n.username,time:Date.now()}),r=new i.RequestOptions({headers:a}),s=JSON.stringify(t.toWriteModel(e,this.store.getCurrentEnv(),this.store.getCurrentVersion(),n.username,String(Date.now())),this.replacerFor(["modificationUserId","creationUserId"]));return this.logger.log(" save assignment sent: "+s),this.http.put(this.config.get("backUrl")+"/amhrouting/"+this.assignmentTypePath(e)+"/"+t.code,s,r).map(function(e){o.logger.log(" from save "+e.json()),e.json()})},AMHAssignmentService.prototype.createAssignment=function(e,t,n){var o=this,a=new i.Headers({"Content-Type":"application/json",userId:n.username,time:Date.now()}),r=new i.RequestOptions({headers:a}),s=JSON.stringify(t.toWriteModel(e,this.store.getCurrentEnv(),this.store.getCurrentVersion(),n.username,String(Date.now()),n.username,String(Date.now())),this.replacerFor(["modificationUserId","creationUserId"]));return this.logger.log(" create assignment sent: "+s),this.http.post(this.config.get("backUrl")+"/amhrouting/"+this.assignmentTypePath(e)+"/"+t.code,s,r).map(function(e){return o.logger.log(" from create "+e.json()),e.json()})},AMHAssignmentService.prototype.assignmentTypePath=function(e){switch(e){case r.AssignType.BK_CHANNEL:return"assignments";case r.AssignType.DTN_COPY:return"distributions";case r.AssignType.FEED_DTN_COPY:return"feedbacks"}},AMHAssignmentService.getFromSource=function(e){var t=e.hits.hits,n=t.map(function(e){return e._source});return n},AMHAssignmentService.prototype.updateDirtyStatus=function(e){this.persistence.setItem("amh_assignment_isDirty",e)},AMHAssignmentService.prototype.isAssignmentStatusDirty=function(){var e=this.persistence.getItem("amh_assignment_isDirty");return"true"===e},AMHAssignmentService.prototype.exportOverview=function(e,t){var n=new i.Headers({"Content-Type":"application/json",userId:t.username,time:Date.now()}),o=new i.RequestOptions({headers:n}),a=JSON.stringify({});return this.http.post(this.config.get("backUrl")+"/amhrouting/csv/export/assignments/"+e,a,o).map(function(e){return e.json()})},AMHAssignmentService.prototype.downloadFile=function(e,t){this.fileDownloader.download(this.config.get("backUrl")+e,t)},AMHAssignmentService=__decorate([o.Injectable(),__metadata("design:paramtypes",[i.Http,s.Config,s.Store,s.FileDownloader,s.Logger])],AMHAssignmentService)}();t.AMHAssignmentService=c},907:function(e,t,n){"use strict";function createComponentFactoryOriginal(e,t){var n=function(){function DynamicComponent(){}return DynamicComponent}(),o=i.Component(t)(n);return e.resolveComponent(o)}function createComponentFactory(e,t,n){var o=i.Component(n)(e);return t.resolveComponent(o)}var i=n(30),o=n(38);t.createComponentFactoryOriginal=createComponentFactoryOriginal,t.createComponentFactory=createComponentFactory;var a=function(){function DynamicHTMLOutlet(e,t,n){this.vcRef=e,this.resolver=t,this.logger=n,this.componentCreation=new i.EventEmitter}return DynamicHTMLOutlet.prototype.ngOnChanges=function(){var e=this;this.comp&&this.meta&&(this.logger.log("passing to createComponent "),
createComponentFactory(this.comp,this.resolver,this.meta).then(function(t){var n=i.ReflectiveInjector.fromResolvedProviders([],e.vcRef.parentInjector),o=e.vcRef.createComponent(t,0,n,[]);e.componentCreation.emit(o)}))},__decorate([i.Input(),__metadata("design:type",i.ComponentMetadata)],DynamicHTMLOutlet.prototype,"meta",void 0),__decorate([i.Input("childComponent"),__metadata("design:type",i.Type)],DynamicHTMLOutlet.prototype,"comp",void 0),__decorate([i.Output(),__metadata("design:type",i.EventEmitter)],DynamicHTMLOutlet.prototype,"componentCreation",void 0),DynamicHTMLOutlet=__decorate([i.Directive({selector:"dynamic-html-outlet"}),__metadata("design:paramtypes",[i.ViewContainerRef,i.ComponentResolver,o.Logger])],DynamicHTMLOutlet)}();t.DynamicHTMLOutlet=a},908:function(e,t,n){"use strict";function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}__export(n(907))},909:function(e,t,n){"use strict";var i=n(30),o=n(873),a=n(38),r=function(){function Alert(e,t,n){this.dcl=e,this._elementRef=t,this.logger=n,this.okButton=!0,this.waitIcon=!0,this.okButtonText="Ok",this.okButtonResponse=2,this.cancelButton=!0,this.cancelButtonText="Cancel",this.cancelButtonResponse=0,this.yesButton=!1,this.yesButtonText="Yes",this.yesButtonResponse=1,this.alertMessage=!0,this.alertFooter=!0,this.alertHeader=!0,this.isOpen=!1,this.alertOutput=new i.EventEmitter}return Alert.prototype.open=function(){this.isOpen=!0},Alert.prototype.yes=function(){this.isOpen=!1,this.alertOutput.emit(this.yesButtonResponse)},Alert.prototype.ok=function(){this.isOpen=!1,this.alertOutput.emit(this.okButtonResponse)},Alert.prototype.cancel=function(){this.isOpen=!1,this.alertOutput.emit(this.cancelButtonResponse)},__decorate([i.Output(),__metadata("design:type",i.EventEmitter)],Alert.prototype,"alertOutput",void 0),Alert=__decorate([i.Component({selector:"alert",template:'\n  <div class="modal fade" [open]="!isOpen" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">\n    <div class="modal-dialog" role="document">\n      <div class="modal-content">\n        <div class="modal-header" [hidden]=!alertHeader>\n          <button type="button" class="close" data-dismiss="modal" (click)=\'cancel()\' aria-label="Close"><span aria-hidden="true">&times;</span></button>\n          <h4 class="modal-title text-center" id="myModalLabel">{{alertTitle}}</h4>\n        </div>\n        <div class="modal-body">\n          <div [hidden]=!alertMessage>\n            <i *ngIf="waitIcon" class="fa fa-spinner" aria-hidden="true" style="font-size:2.1em;"></i>\n            &nbsp;&nbsp;{{message}}\n          </div>\n        </div>\n        <div class="modal-footer" [hidden]=!alertFooter>\n          <span [hidden]=!yesButton >\n            <button class="btn btn-primary" (click)="yes()">{{yesButtonText}}</button>\n          </span>\n          <span [hidden]=!okButton >\n            <button class="btn btn-primary" (click)="ok()">{{okButtonText}}</button>\n          </span>\n          <span [hidden]=!cancelButton>\n            <button class="btn btn-primary" (click)="cancel()">{{cancelButtonText}}</button>\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n  ',providers:[],directives:[o.Open],encapsulation:i.ViewEncapsulation.None,pipes:[]}),__metadata("design:paramtypes",[i.DynamicComponentLoader,i.ElementRef,a.Logger])],Alert)}();t.Alert=r},887:function(e,t,n){"use strict";function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}__export(n(909)),__export(n(910)),__export(n(873))},910:function(e,t,n){"use strict";var i=n(30),o=n(873),a=n(908),r=n(38),s=function(){function Modal(e,t,n){this.dcl=e,this._elementRef=t,this.logger=n,this.doneSender=new i.EventEmitter,this.okButton=!0,this.okButtonText="Ok",this.cancelButton=!0,this.cancelButtonText="Cancel",this.modalMessage=!0,this.modalFooter=!0,this.modalHeader=!0,this.isOpen=!1,this.modalOutput=new i.EventEmitter}return Modal.prototype.saveComponent=function(e){var t=this;this.logger.debug("component recevied in Modal "+e),this.logger.debug(" parameters => "+this.parameters.get("messageId")),this.componentCreated=e,this.componentCreated._hostElement.component.doneSender=this.doneSender,this.componentCreated._hostElement.component.initialize(this.parameters),this.subscription=this.doneSender.subscribe(function(e){"done"==e?t.submit():t.close()})},Modal.prototype.childComponentListener=function(e){"done"==e?this.submit():this.close()},Modal.prototype.createMetadata=function(e){this.meta=new i.ComponentMetadata(e)},Modal.prototype.open=function(e){this.isOpen=!0,this.modalChildComponent=e},Modal.prototype.close=function(e){this.dispose(),e&&this.modalOutput.emit(e)},Modal.prototype.submit=function(){this.modalOutput.emit(this.componentCreated._hostElement.component),this.dispose()},Modal.prototype.dispose=function(){this.isOpen=!1,void 0!=this.componentCreated&&(this.logger.debug("...from modal : destroying child component"),this.componentCreated.destroy(),this.logger.debug("...from modal : unsubscribing child component"),this.subscription.unsubscribe())},__decorate([i.Output(),__metadata("design:type",i.EventEmitter)],Modal.prototype,"modalOutput",void 0),Modal=__decorate([i.Component({selector:"modal",template:'\n  <div class="modal fade" [open]="!isOpen" id="myModal" [attr.data-keyboard]="true" [attr.data-backdrop]="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">\n    <div class="modal-dialog" role="document" style="width:80%;">\n      <div class="modal-content">\n        <div class="modal-header" [hidden]=!modalHeader>\n          <button type="button" class="close" data-dismiss="modal" (click)=\'close()\' aria-label="Close"><span aria-hidden="true">&times;</span></button>\n          <h4 class="modal-title text-center" id="myModalLabel">{{modalTitle}}</h4>\n        </div>\n        <dynamic-html-outlet (componentCreation)="saveComponent($event)" [meta]="meta" [childComponent]="modalChildComponent"></dynamic-html-outlet>\n      </div>\n    </div>\n  </div>\n',providers:[],directives:[o.Open,a.DynamicHTMLOutlet],encapsulation:i.ViewEncapsulation.None,pipes:[]}),__metadata("design:paramtypes",[i.DynamicComponentLoader,i.ElementRef,r.Logger])],Modal)}();t.Modal=s},873:function(e,t,n){"use strict";var i=n(30),o=n(38),a=function(){function Open(e){this.logger=e,this.isExpanded=!0}return Object.defineProperty(Open.prototype,"open",{get:function(){return this.isExpanded},set:function(e){this.isExpanded=e,this.toggle()},enumerable:!0,configurable:!0}),Open.prototype.toggle=function(){this.isExpanded?this.hide():this.show()},Open.prototype.hide=function(){this.isExpanded=!1,this.display="none";var e=document.getElementsByClassName("modal-backdrop");e.length>0&&document.body.removeChild(e[0])},Open.prototype.show=function(){var e=document.createElement("div");e.className="modal-backdrop fade in",document.body.appendChild(e),this.isExpanded=!0,this.display="block"},__decorate([i.HostBinding("style.display"),__metadata("design:type",String)],Open.prototype,"display",void 0),__decorate([i.HostBinding("class.in"),i.HostBinding("attr.aria-expanded"),__metadata("design:type",Boolean)],Open.prototype,"isExpanded",void 0),__decorate([i.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],Open.prototype,"open",null),Open=__decorate([i.Directive({selector:"[open]"}),__metadata("design:paramtypes",[o.Logger])],Open)}();t.Open=a},926:function(e,t,n){"use strict";function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}__export(n(1167))},1167:function(e,t){"use strict";var n=function(){function Option(e,t,n,i){void 0===i&&(i=!1),this.code=t,this.id=e,this.description=n,this.selected=i}return Object.defineProperty(Option.prototype,"htmlText",{get:function(){return this.description},enumerable:!0,configurable:!0}),Option.fromJson=function(e){var t=JSON.parse(e);return new Option(t.id,t.code,t.description)},Option.mapToProperty=function(e){return e.id},Option}();t.Option=n}});
//# sourceMappingURL=19.21c1354967b2a8cbd1aa.bundle.map