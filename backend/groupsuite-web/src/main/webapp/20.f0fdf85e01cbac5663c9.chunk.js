webpackJsonp([20],{907:function(t,e,o){"use strict";function createComponentFactoryOriginal(t,e){var o=function(){function DynamicComponent(){}return DynamicComponent}(),i=n.Component(e)(o);return t.resolveComponent(i)}function createComponentFactory(t,e,o){var i=n.Component(o)(t);return e.resolveComponent(i)}var n=o(30),i=o(38);e.createComponentFactoryOriginal=createComponentFactoryOriginal,e.createComponentFactory=createComponentFactory;var r=function(){function DynamicHTMLOutlet(t,e,o){this.vcRef=t,this.resolver=e,this.logger=o,this.componentCreation=new n.EventEmitter}return DynamicHTMLOutlet.prototype.ngOnChanges=function(){var t=this;this.comp&&this.meta&&(this.logger.log("passing to createComponent "),createComponentFactory(this.comp,this.resolver,this.meta).then(function(e){var o=n.ReflectiveInjector.fromResolvedProviders([],t.vcRef.parentInjector),i=t.vcRef.createComponent(e,0,o,[]);t.componentCreation.emit(i)}))},__decorate([n.Input(),__metadata("design:type",n.ComponentMetadata)],DynamicHTMLOutlet.prototype,"meta",void 0),__decorate([n.Input("childComponent"),__metadata("design:type",n.Type)],DynamicHTMLOutlet.prototype,"comp",void 0),__decorate([n.Output(),__metadata("design:type",n.EventEmitter)],DynamicHTMLOutlet.prototype,"componentCreation",void 0),DynamicHTMLOutlet=__decorate([n.Directive({selector:"dynamic-html-outlet"}),__metadata("design:paramtypes",[n.ViewContainerRef,n.ComponentResolver,i.Logger])],DynamicHTMLOutlet)}();e.DynamicHTMLOutlet=r},908:function(t,e,o){"use strict";function __export(t){for(var o in t)e.hasOwnProperty(o)||(e[o]=t[o])}__export(o(907))},909:function(t,e,o){"use strict";var n=o(30),i=o(873),r=o(38),a=function(){function Alert(t,e,o){this.dcl=t,this._elementRef=e,this.logger=o,this.okButton=!0,this.waitIcon=!0,this.okButtonText="Ok",this.okButtonResponse=2,this.cancelButton=!0,this.cancelButtonText="Cancel",this.cancelButtonResponse=0,this.yesButton=!1,this.yesButtonText="Yes",this.yesButtonResponse=1,this.alertMessage=!0,this.alertFooter=!0,this.alertHeader=!0,this.isOpen=!1,this.alertOutput=new n.EventEmitter}return Alert.prototype.open=function(){this.isOpen=!0},Alert.prototype.yes=function(){this.isOpen=!1,this.alertOutput.emit(this.yesButtonResponse)},Alert.prototype.ok=function(){this.isOpen=!1,this.alertOutput.emit(this.okButtonResponse)},Alert.prototype.cancel=function(){this.isOpen=!1,this.alertOutput.emit(this.cancelButtonResponse)},__decorate([n.Output(),__metadata("design:type",n.EventEmitter)],Alert.prototype,"alertOutput",void 0),Alert=__decorate([n.Component({selector:"alert",template:'\n  <div class="modal fade" [open]="!isOpen" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">\n    <div class="modal-dialog" role="document">\n      <div class="modal-content">\n        <div class="modal-header" [hidden]=!alertHeader>\n          <button type="button" class="close" data-dismiss="modal" (click)=\'cancel()\' aria-label="Close"><span aria-hidden="true">&times;</span></button>\n          <h4 class="modal-title text-center" id="myModalLabel">{{alertTitle}}</h4>\n        </div>\n        <div class="modal-body">\n          <div [hidden]=!alertMessage>\n            <i *ngIf="waitIcon" class="fa fa-spinner" aria-hidden="true" style="font-size:2.1em;"></i>\n            &nbsp;&nbsp;{{message}}\n          </div>\n        </div>\n        <div class="modal-footer" [hidden]=!alertFooter>\n          <span [hidden]=!yesButton >\n            <button class="btn btn-primary" (click)="yes()">{{yesButtonText}}</button>\n          </span>\n          <span [hidden]=!okButton >\n            <button class="btn btn-primary" (click)="ok()">{{okButtonText}}</button>\n          </span>\n          <span [hidden]=!cancelButton>\n            <button class="btn btn-primary" (click)="cancel()">{{cancelButtonText}}</button>\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n  ',providers:[],directives:[i.Open],encapsulation:n.ViewEncapsulation.None,pipes:[]}),__metadata("design:paramtypes",[n.DynamicComponentLoader,n.ElementRef,r.Logger])],Alert)}();e.Alert=a},887:function(t,e,o){"use strict";function __export(t){for(var o in t)e.hasOwnProperty(o)||(e[o]=t[o])}__export(o(909)),__export(o(910)),__export(o(873))},910:function(t,e,o){"use strict";var n=o(30),i=o(873),r=o(908),a=o(38),s=function(){function Modal(t,e,o){this.dcl=t,this._elementRef=e,this.logger=o,this.doneSender=new n.EventEmitter,this.okButton=!0,this.okButtonText="Ok",this.cancelButton=!0,this.cancelButtonText="Cancel",this.modalMessage=!0,this.modalFooter=!0,this.modalHeader=!0,this.isOpen=!1,this.modalOutput=new n.EventEmitter}return Modal.prototype.saveComponent=function(t){var e=this;this.logger.debug("component recevied in Modal "+t),this.logger.debug(" parameters => "+this.parameters.get("messageId")),this.componentCreated=t,this.componentCreated._hostElement.component.doneSender=this.doneSender,this.componentCreated._hostElement.component.initialize(this.parameters),this.subscription=this.doneSender.subscribe(function(t){"done"==t?e.submit():e.close()})},Modal.prototype.childComponentListener=function(t){"done"==t?this.submit():this.close()},Modal.prototype.createMetadata=function(t){this.meta=new n.ComponentMetadata(t)},Modal.prototype.open=function(t){this.isOpen=!0,this.modalChildComponent=t},Modal.prototype.close=function(t){this.dispose(),t&&this.modalOutput.emit(t)},Modal.prototype.submit=function(){this.modalOutput.emit(this.componentCreated._hostElement.component),this.dispose()},Modal.prototype.dispose=function(){this.isOpen=!1,void 0!=this.componentCreated&&(this.logger.debug("...from modal : destroying child component"),this.componentCreated.destroy(),this.logger.debug("...from modal : unsubscribing child component"),this.subscription.unsubscribe())},__decorate([n.Output(),__metadata("design:type",n.EventEmitter)],Modal.prototype,"modalOutput",void 0),Modal=__decorate([n.Component({selector:"modal",template:'\n  <div class="modal fade" [open]="!isOpen" id="myModal" [attr.data-keyboard]="true" [attr.data-backdrop]="false" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">\n    <div class="modal-dialog" role="document" style="width:80%;">\n      <div class="modal-content">\n        <div class="modal-header" [hidden]=!modalHeader>\n          <button type="button" class="close" data-dismiss="modal" (click)=\'close()\' aria-label="Close"><span aria-hidden="true">&times;</span></button>\n          <h4 class="modal-title text-center" id="myModalLabel">{{modalTitle}}</h4>\n        </div>\n        <dynamic-html-outlet (componentCreation)="saveComponent($event)" [meta]="meta" [childComponent]="modalChildComponent"></dynamic-html-outlet>\n      </div>\n    </div>\n  </div>\n',providers:[],directives:[i.Open,r.DynamicHTMLOutlet],encapsulation:n.ViewEncapsulation.None,pipes:[]}),__metadata("design:paramtypes",[n.DynamicComponentLoader,n.ElementRef,a.Logger])],Modal)}();e.Modal=s},873:function(t,e,o){"use strict";var n=o(30),i=o(38),r=function(){function Open(t){this.logger=t,this.isExpanded=!0}return Object.defineProperty(Open.prototype,"open",{get:function(){return this.isExpanded},set:function(t){this.isExpanded=t,this.toggle()},enumerable:!0,configurable:!0}),Open.prototype.toggle=function(){this.isExpanded?this.hide():this.show()},Open.prototype.hide=function(){this.isExpanded=!1,this.display="none";var t=document.getElementsByClassName("modal-backdrop");t.length>0&&document.body.removeChild(t[0])},Open.prototype.show=function(){var t=document.createElement("div");t.className="modal-backdrop fade in",document.body.appendChild(t),this.isExpanded=!0,this.display="block"},__decorate([n.HostBinding("style.display"),__metadata("design:type",String)],Open.prototype,"display",void 0),__decorate([n.HostBinding("class.in"),n.HostBinding("attr.aria-expanded"),__metadata("design:type",Boolean)],Open.prototype,"isExpanded",void 0),__decorate([n.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],Open.prototype,"open",null),Open=__decorate([n.Directive({selector:"[open]"}),__metadata("design:paramtypes",[i.Logger])],Open)}();e.Open=r},1209:function(t,e,o){"use strict";function __export(t){for(var o in t)e.hasOwnProperty(o)||(e[o]=t[o])}__export(o(1241))},1241:function(t,e,o){"use strict";var n=o(30),i=o(8),r=o(58),a=o(1187),s=o(887),l=o(531),p=o(530),c=o(38),d=o(258),m=function(){function SAAExportImportComponent(t,e,o,n,i,r,a){this.router=t,this.saaRoutingService=e,this.fileUploadService=o,this.fileDownloader=n,this.config=i,this.logger=a,this.parameters={},this.actionMode="Import",this.uploadProgress=0,this.fileList=new Array,this.actionMode=r.params.action||"Import",this.isImport="Import"==this.actionMode,this.menuConfig=[new l.MenuConfig("fa fa-home","/home","Home"),new l.MenuConfig("fa fa-sitemap","/saa-routing","SAA Routing"),new l.MenuConfig("fa fa-cloud-upload","",this.actionMode)]}return SAAExportImportComponent.prototype.ngOnInit=function(){this.logger.log("hello `SAA Export Import` component")},SAAExportImportComponent.prototype.asyncDataWithWebpack=function(){},SAAExportImportComponent.prototype.fileSelection=function(t){for(var e=t.target.files,o=0,n=e.length;o<n;o++)this.fileList.push(e.item(o));this.logger.log("file selected "+this.fileList)},SAAExportImportComponent.prototype.exportFileNameChanged=function(t){this.filePath=t},SAAExportImportComponent.prototype.alertOpen=function(){this.alert.alertFooter=!1,this.alert.cancelButton=!1,this.alert.okButton=!1,this.alert.alertHeader=!0,this.alert.alertTitle=this.actionMode+" in progress ",this.alert.message="You will be notified when the "+this.actionMode+" finish.",this.alert.cancelButtonText="Ok",this.alert.open()},SAAExportImportComponent.prototype.confirmClose=function(t){this.logger.log("confirming ------------  "+t),0==t&&this.router.parent.navigate(["SAARoutingHome"])},SAAExportImportComponent.prototype.closeAlert=function(){},SAAExportImportComponent.prototype.disableExpImpButton=function(){return this.isImport?0==this.fileList.length:!this.filePath||0==this.filePath.length},SAAExportImportComponent.prototype.exportImport=function(){var t=this;this.alertOpen(),this.logger.log("export import ... isImport "+this.isImport+" selected file "+this.filePath);var e;this.isImport?this.uploadHandler().then(function(e){t.alert.message=t.actionMode+" Done.",t.closeAlert()},function(e){t.logger.log(" ERROR while importing "+e),t.alert.message=" An error has occurred while processing the "+t.actionMode+".",t.closeAlert()}):(this.logger.log("[EXPORT] just before calling export post on server"),e=this.saaRoutingService.export("UNKNOWN","DEFAULT",this.filePath),e.subscribe(function(e){t.logger.log("["+t.actionMode+"] %s",e),t.fileDownloader.download(t.config.get("saaBackUrl")+"/routing/export/"+e.response,e.response)},function(e){t.logger.log("["+t.actionMode+"] Can't be done. Error code: %s, URL: %s ",e.status,e.url),t.alert.message=" An error has occurred while processing the "+t.actionMode,t.closeAlert()},function(){t.logger.log("["+t.actionMode+"]  from backend done"),t.alert.message=t.actionMode+" Done.",t.closeAlert()}))},SAAExportImportComponent.prototype.uploadHandler=function(){var t=this;this.fileUploadService.getObserver().subscribe(function(e){t.uploadProgress=e});try{return this.fileUploadService.upload(this.config.get("saaBackUrl")+"/routing/import",this.fileList)}catch(t){this.logger.error("An error has occurred while importing: "+t),document.write(t)}},SAAExportImportComponent.prototype.cancel=function(){this.router.parent.navigate(["SAARoutingHome"])},__decorate([n.ViewChild(s.Alert),__metadata("design:type",Object)],SAAExportImportComponent.prototype,"alert",void 0),SAAExportImportComponent=__decorate([n.Component({selector:"saa-export-import",styles:["\n    h1 {\n      font-family: Arial, Helvetica, sans-serif\n    }\n  "],template:o(1273),directives:[i.CORE_DIRECTIVES,i.FORM_DIRECTIVES,i.NgClass,s.Alert,p.HeaderSecondary,d.Permissions,d.NotPermissions],providers:[i.FORM_PROVIDERS,a.SAARoutingService,c.FileUploadService,c.FileDownloader]}),__metadata("design:paramtypes",[r.Router,a.SAARoutingService,c.FileUploadService,c.FileDownloader,c.Config,r.RouteParams,c.Logger])],SAAExportImportComponent)}();e.SAAExportImportComponent=m},1273:function(t,e){t.exports='<!--main content start-->\r\n<section id="main-content">\r\n    <section class="wrapper">\r\n        <menu-header [header-menu]="menuConfig"></menu-header>\r\n\r\n        <div class="row">\r\n            <div class="col-sm-12 col-md-12 col-lg-12">\r\n                <div class="panel panel-default">\r\n                    <div class="panel-heading">\r\n                        <h3 class="panel-title">{{actionMode}} </h3>\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <form>\r\n                            <div class="row">\r\n                                <div class="col-sm-2 col-md-2 col-lg-2"></div>\r\n                                <div class="col-sm-6 col-md-6 col-lg-6 form-group form-group-sm" *ngIf="isImport">\r\n                                    <input  type="file" directory (change)="fileSelection($event)" />\r\n                                </div>\r\n                                <label *ngIf="!isImport" class="col-sm-1 col-md-1 col-lg-1 control-label">File Name</label>\r\n                                <div class="col-sm-4 col-md-4 col-lg-4 form-group form-group-sm" *ngIf="!isImport">\r\n                                    <input  type="text"  (change)="exportFileNameChanged($event.target.value)" />\r\n                                </div>\r\n                                <label *ngIf="!isImport" class="col-sm-1 col-md-1 col-lg-1">.xml</label>\r\n                                <div class="col-sm-4 col-md-4 col-lg-4"></div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</section>\r\n<alert (alertOutput)="confirmClose($event)"></alert>\r\n<!--main content end-->\r\n<footer class="footer dark-bg">\r\n    <div class="row">\r\n        <div class="col-sm-12 col-md-12 col-lg-12">\r\n            <div class="top-nav notification-row pull-right">\r\n                <button *gpIf="[\'saa.import\', \'saa.export\']" [disabled]="disableExpImpButton()" class="btn btn-primary" (click)="exportImport()" > {{actionMode}} </button>\r\n                <button *gpNotIf="[\'saa.import\', \'saa.export\']" disabled="true" class="btn btn-primary" > {{actionMode}} </button>\r\n                <button class="btn btn-default" (click)="cancel()"> Cancel</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</footer>'}});
//# sourceMappingURL=20.f0fdf85e01cbac5663c9.bundle.map